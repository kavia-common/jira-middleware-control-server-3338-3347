{"is_source_file": true, "format": "Python", "description": "This file provides an asynchronous Python client class 'JiraClient' for interacting with the Jira REST API (version 3 and Agile 1.0 endpoints). It supports operations such as issue search, creation, updates, linking issues to epics, managing sprints/boards, and handling custom fields with caching. It also defines custom exception handling with 'JiraClientError' and a dependency factory for FastAPI.", "external_files": ["app.core.config"], "external_methods": ["get_settings"], "published": ["JiraClient", "JiraClientError", "get_jira_client"], "classes": [{"name": "JiraClientError", "description": "Custom exception representing errors during Jira API interactions."}, {"name": "JiraClient", "description": "Main class providing asynchronous methods for Jira API operations, including issues, epics, sprints, boards, custom fields, and errors handling."}], "methods": [{"name": "JiraClientError.__init__", "description": "Initializes a JiraClientError with message, status code, and optional details."}, {"name": "JiraClient.__init__", "description": "Constructor for JiraClient, sets base URL, credentials, timeout, and internal cache."}, {"name": "JiraClient._get_client", "description": "Lazily initializes and returns the httpx.AsyncClient instance."}, {"name": "JiraClient._basic_token", "description": "Generates a base64 encoded token for basic authentication."}, {"name": "JiraClient._request_with_retries", "description": "Performs HTTP requests with retries for certain error statuses and network errors."}, {"name": "JiraClient._safe_response_text", "description": "Safely retrieves text from a response, with fallback on exception."}, {"name": "JiraClient.search_issues", "description": "Performs a JQL-based search for issues."}, {"name": "JiraClient.create_issue", "description": "Creates a new Jira issue with specified project, summary, description, and issue type."}, {"name": "JiraClient.get_field_mappings", "description": "Discovers and caches custom field IDs for Epic Link, Epic Name, and Story points."}, {"name": "JiraClient.create_epic", "description": "Creates an Epic issue using configured custom field mappings."}, {"name": "JiraClient.create_story", "description": "Creates a Story issue, optionally linking to an epic and setting story points."}, {"name": "JiraClient.link_issue_to_epic", "description": "Links an issue to an epic via the Epic Link custom field."}, {"name": "JiraClient.get_transitions", "description": "Fetches available transitions for a given issue."}, {"name": "JiraClient.transition_issue", "description": "Performs a transition on an issue."}, {"name": "JiraClient.add_comment", "description": "Adds a comment to a Jira issue."}, {"name": "JiraClient.estimate_story_points", "description": "Sets story points on an issue."}, {"name": "JiraClient._agile_url", "description": "Constructs URLs for Agile API endpoints."}, {"name": "JiraClient.list_boards", "description": "Lists boards, optionally filtered by project."}, {"name": "JiraClient.list_sprints", "description": "Lists sprints for a specified board."}, {"name": "JiraClient.create_sprint", "description": "Creates a new sprint."}, {"name": "JiraClient.update_sprint", "description": "Updates a sprint."}, {"name": "JiraClient.move_issues_to_sprint", "description": "Moves multiple issues into a sprint."}, {"name": "JiraClient.get_sprint_issues", "description": "Fetches issues associated with a sprint."}, {"name": "JiraClient.search_issues_via_params", "description": "Builds a JQL query from parameters and searches issues."}, {"name": "JiraClient.aclose", "description": "Closes the underlying HTTP client."}, {"name": "JiraClient get_jira_client()", "description": "FastAPI dependency factory that creates and returns a JiraClient instance using application settings.", "scope": "", "scopeKind": ""}, {"name": "None __init__(self, base_url: str, email: str, api_token: str, timeout: float = 15.0)", "scope": "JiraClient", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, message: str, status_code: int = 502, details: Any | None = None)", "scope": "JiraClientError", "scopeKind": "class", "description": "unavailable"}, {"name": "str _agile_url(self, path: str)", "scope": "JiraClient", "scopeKind": "class", "description": "unavailable"}, {"name": "str _basic_token(self)", "scope": "JiraClient", "scopeKind": "class", "description": "unavailable"}, {"name": "httpx.AsyncClient _get_client(self)", "scope": "JiraClient", "scopeKind": "class", "description": "unavailable"}, {"name": "httpx.Response _request_with_retries(self, method: str, url: str, **kwargs)", "scope": "JiraClient", "scopeKind": "class", "description": "unavailable"}, {"name": "str _safe_response_text(self, response: httpx.Response)", "scope": "JiraClient", "scopeKind": "class", "description": "unavailable"}, {"name": "None aclose(self)", "scope": "JiraClient", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str,Any] add_comment(self, issue_key: str, body: str)", "scope": "JiraClient", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str,Any] create_epic(self, request: Any)", "scope": "JiraClient", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str,Any] create_issue(self, project_key: str, summary: str, description: Optional[str], issuetype: str)", "scope": "JiraClient", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str,Any] create_sprint(self, payload: Dict[str, Any])", "scope": "JiraClient", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str,Any] create_story(self, request: Any)", "scope": "JiraClient", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str,Any] estimate_story_points(self, issue_key: str, points: float)", "scope": "JiraClient", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str,str] get_field_mappings(self)", "scope": "JiraClient", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str,Any] get_sprint_issues(self, sprint_id: int, jql_filters: Optional[str] = None)", "scope": "JiraClient", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str,Any] get_transitions(self, issue_key: str)", "scope": "JiraClient", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str,Any] link_issue_to_epic(self, epic_key_or_id: str, issue_key_or_id: str)", "scope": "JiraClient", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str,Any] list_boards(self, project_key_or_id: Optional[str] = None)", "scope": "JiraClient", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str,Any] list_sprints(self, board_id: int, state: Optional[str] = None)", "scope": "JiraClient", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str,Any] move_issues_to_sprint(self, sprint_id: int, issue_keys: List[str])", "scope": "JiraClient", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str,Any] search_issues(self, jql: str, fields: Optional[List[str]] = None, max_results: int = 25)", "scope": "JiraClient", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str,Any] search_issues_via_params( self, project: Optional[str] = None, board_id: Optional[int] = None, sprint_id: Optional[int] = None, assignee: Optional[str] = None, status: Optional[str] = None, )", "scope": "JiraClient", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str,Any] transition_issue(self, issue_key: str, transition_id: str)", "scope": "JiraClient", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str,Any] update_sprint(self, sprint_id: int, payload: Dict[str, Any])", "scope": "JiraClient", "scopeKind": "class", "description": "unavailable"}], "calls": ["get_settings", "httpx.AsyncClient.request", "httpx.AsyncClient.json", "time.time", "asyncio.sleep", "resp.json()", "resp.text"], "search-terms": ["JiraClient", "Jira API", "async Jira", "issue creation", "epic management", "sprint handling", "custom fields", "rate limiting", "exponential backoff", "issue linking"], "state": 2, "file_id": 12, "knowledge_revision": 49, "git_revision": "4467dda3e275c4c53669082d58325bf2d5d1c8ff", "revision_history": [{"25": ""}, {"43": ""}, {"47": "4467dda3e275c4c53669082d58325bf2d5d1c8ff"}, {"48": "4467dda3e275c4c53669082d58325bf2d5d1c8ff"}, {"49": "4467dda3e275c4c53669082d58325bf2d5d1c8ff"}], "ctags": [{"_type": "tag", "name": "JiraClient", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^class JiraClient:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "JiraClientError", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^class JiraClientError(Exception):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^    def __init__(self, base_url: str, email: str, api_token: str, timeout: float = 15.0) -> None/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, base_url: str, email: str, api_token: str, timeout: float = 15.0)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^    def __init__(self, message: str, status_code: int = 502, details: Any | None = None):$/", "language": "Python", "kind": "member", "signature": "(self, message: str, status_code: int = 502, details: Any | None = None)", "scope": "JiraClientError", "scopeKind": "class"}, {"_type": "tag", "name": "_agile_url", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^    def _agile_url(self, path: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, path: str)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "_basic_token", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^    def _basic_token(self) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "_get_client", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^    async def _get_client(self) -> httpx.AsyncClient:$/", "language": "Python", "typeref": "typename:httpx.AsyncClient", "kind": "member", "signature": "(self)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "_request_with_retries", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^    async def _request_with_retries(self, method: str, url: str, **kwargs) -> httpx.Response:$/", "language": "Python", "typeref": "typename:httpx.Response", "kind": "member", "signature": "(self, method: str, url: str, **kwargs)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "_safe_response_text", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^    async def _safe_response_text(self, response: httpx.Response) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, response: httpx.Response)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "aclose", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^    async def aclose(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "add_comment", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^    async def add_comment(self, issue_key: str, body: str) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, issue_key: str, body: str)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "create_epic", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^    async def create_epic(self, request: Any) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, request: Any)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "create_issue", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^    async def create_issue(self, project_key: str, summary: str, description: Optional[str], iss/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, project_key: str, summary: str, description: Optional[str], issuetype: str)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "create_sprint", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^    async def create_sprint(self, payload: Dict[str, Any]) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, payload: Dict[str, Any])", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "create_story", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^    async def create_story(self, request: Any) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, request: Any)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "estimate_story_points", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^    async def estimate_story_points(self, issue_key: str, points: float) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, issue_key: str, points: float)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "get_field_mappings", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^    async def get_field_mappings(self) -> Dict[str, str]:$/", "language": "Python", "typeref": "typename:Dict[str,str]", "kind": "member", "signature": "(self)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "get_jira_client", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^def get_jira_client() -> JiraClient:$/", "language": "Python", "typeref": "typename:JiraClient", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_sprint_issues", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^    async def get_sprint_issues(self, sprint_id: int, jql_filters: Optional[str] = None) -> Dict/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, sprint_id: int, jql_filters: Optional[str] = None)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "get_transitions", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^    async def get_transitions(self, issue_key: str) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, issue_key: str)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "link_issue_to_epic", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^    async def link_issue_to_epic(self, epic_key_or_id: str, issue_key_or_id: str) -> Dict[str, A/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, epic_key_or_id: str, issue_key_or_id: str)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "list_boards", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^    async def list_boards(self, project_key_or_id: Optional[str] = None) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, project_key_or_id: Optional[str] = None)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "list_sprints", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^    async def list_sprints(self, board_id: int, state: Optional[str] = None) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, board_id: int, state: Optional[str] = None)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "move_issues_to_sprint", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^    async def move_issues_to_sprint(self, sprint_id: int, issue_keys: List[str]) -> Dict[str, An/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, sprint_id: int, issue_keys: List[str])", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "search_issues", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^    async def search_issues(self, jql: str, fields: Optional[List[str]] = None, max_results: int/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, jql: str, fields: Optional[List[str]] = None, max_results: int = 25)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "search_issues_via_params", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^    async def search_issues_via_params($/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "( self, project: Optional[str] = None, board_id: Optional[int] = None, sprint_id: Optional[int] = None, assignee: Optional[str] = None, status: Optional[str] = None, )", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "transition_issue", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^    async def transition_issue(self, issue_key: str, transition_id: str) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, issue_key: str, transition_id: str)", "scope": "JiraClient", "scopeKind": "class"}, {"_type": "tag", "name": "update_sprint", "path": "/home/kavia/workspace/code-generation/jira-middleware-control-server-3338-3347/jira_mcp_backend/app/services/jira_client.py", "pattern": "/^    async def update_sprint(self, sprint_id: int, payload: Dict[str, Any]) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, sprint_id: int, payload: Dict[str, Any])", "scope": "JiraClient", "scopeKind": "class"}], "hash": "bad1b470a8722956a55e2715a393d0a2", "format-version": 4, "code-base-name": "jira_mcp_backend", "filename": "jira_mcp_backend/app/services/jira_client.py"}